{"version":3,"sources":["twitter.js","App.js","registerServiceWorker.js","index.js"],"names":["window","twttr","d","s","id","js","fjs","getElementsByTagName","t","getElementById","createElement","src","parentNode","insertBefore","_e","ready","f","push","document","secrets","require","axios","stores","cities","queryString","allStores","randomApiDomain","domains","Math","floor","random","length","formatCurrency","num","Number","parseFloat","toFixed","saveSearch","product","url","post","catch","e","console","log","getUPC","sku","a","get","err","data","upc","variants","resp","insertInList","arr","elem","len","Array","isArray","inserted","i","price","splice","App","searchHistory","q","searches","params","count","then","response","map","store","filter","zip","createdDate","_id","__v","storeId","no","address","setState","toggleInstructions","showInstructions","state","searchStores","inStockOnly","minQty","numStores","storeCount","lowPrice","lowZip","numResults","showAll","progress","statusMessage","start","minqty","item","storePrices","slice","min","name","concat","userZip","getLocalZip","navigator","geolocation","getCurrentPosition","pos","addr","gps_lookup","coords","latitude","longitude","zipcode","handleChange","bind","handleSubmit","handleSearch","handleSearchAgain","event","val","target","checked","value","this","preventDefault","toString","setTimeout","query","parseUrl","location","href","showall","parseInt","trim","tableDisplay","productDisplay","className","onClick","rel","style","textAlign","marginLeft","display","onSubmit","type","onChange","defaultChecked","disabled","width","bsUrl","onlinePrice","offerType","align","storePrice","key","qty","stock","pickupToday","idx","Component","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","error","ReactDOM","render","URL","process","origin","addEventListener","fetch","status","headers","indexOf","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.46e68a4a.chunk.js","sourcesContent":["window.twttr = (function(d, s, id) {\r\n  var js, fjs = d.getElementsByTagName(s)[0],\r\n    t = window.twttr || {};\r\n  if (d.getElementById(id)) return t;\r\n  js = d.createElement(s);\r\n  js.id = id;\r\n  js.src = \"https://platform.twitter.com/widgets.js\";\r\n  fjs.parentNode.insertBefore(js, fjs);\r\n\r\n  t._e = [];\r\n  t.ready = function(f) {\r\n    t._e.push(f);\r\n  };\r\n\r\n  return t;\r\n}(document, \"script\", \"twitter-wjs\"));\r\n","import React, {Component} from 'react';\r\nimport './App.css';\r\nconst secrets = require('./secrets.json');\r\n//import logo from './logo.svg';\r\nconst axios = require('axios');\r\nconst stores = require('./stores.json');\r\nlet cities = require('cities');\r\n\r\nconst queryString = require('query-string');\r\n\r\nlet allStores = stores.allStores;\r\n\r\nconst randomApiDomain = () => {\r\n  let domains = secrets.domains;\r\n  //let domains = ['a.localhost:3001', 'b.localhost:3001', 'c.localhost:3001'];\r\n  return domains[Math.floor(Math.random()*domains.length)];\r\n}\r\nconst formatCurrency = (num) => {\r\n  if (typeof(num) === 'undefined')\r\n    return '-';\r\n  else\r\n    return '$' + Number.parseFloat(num).toFixed(2);\r\n}\r\n\r\nconst saveSearch = (product) => {\r\n  let url = `https://${randomApiDomain()}/products`;\r\n  //let url = 'http://localhost:3001/products';\r\n  axios.post(url, product).catch(e => console.log('save search failed'));\r\n}\r\nconst getUPC = async (sku) => {\r\n  const url = `https://${randomApiDomain()}/upc/${sku}`;\r\n  let resp = await axios.get(url).catch(err => {return {data: {upc:0, variants : ''}}});\r\n  return {upc: resp.data.upc, variants: resp.data.variants};\r\n};\r\n\r\nconst insertInList = (arr, elem) => {\r\n  let len = 0;\r\n  if (Array.isArray(arr)) {\r\n    len = arr.length;\r\n  }\r\n\r\n  if (len === 0) {\r\n    arr = [];\r\n    arr.push(elem);\r\n    return arr;\r\n  }\r\n\r\n  let inserted = false;\r\n  for (let i = 0; i < len; i++) {\r\n    if (elem.price <= arr[i].price) {\r\n      arr.splice(i, 0, elem);\r\n      inserted = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (!inserted) {\r\n    arr.splice(len, 0, elem);\r\n  }\r\n\r\n  return arr;\r\n};\r\n\r\n//===============\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      upc: '',\r\n      zip: '',\r\n      storePrices: [],\r\n      product: {},\r\n      progress: 0,\r\n      statusMessage: '',\r\n      searches: [],\r\n      showInstructions: false\r\n    }\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleSearch = this.handleSearch.bind(this);\r\n    this.handleSearchAgain = this.handleSearchAgain.bind(this);\r\n    this.searchStores = this.searchStores.bind(this);\r\n    this.searchHistory = this.searchHistory.bind(this);\r\n    this.getLocalZip = this.getLocalZip.bind(this);\r\n    this.toggleInstructions = this.toggleInstructions.bind(this);\r\n  }\r\n\r\n  searchHistory = async (q) => {\r\n    let url = `https://${randomApiDomain()}/products`;\r\n    //let url = 'http://localhost:3001/products';\r\n    let searches = [];\r\n    axios.get(url, {\r\n      params: {\r\n        count: 50,\r\n        q: q\r\n      }\r\n    }).then(response => {\r\n      if (response && response.data) {\r\n        searches = response.data;\r\n      }\r\n      searches = searches.map(s => {\r\n        let store = allStores.filter(store => store.zip === s.zip)[0];\r\n        delete s.createdDate;\r\n        delete s._id;\r\n        delete s.__v;\r\n        return {...s, storeId: store?store.no:0, address: store?store.address:''};\r\n      });\r\n      this.setState({searches});\r\n    })\r\n    .catch(e => {\r\n      console.log('Cannot get recent searches', e);\r\n    });\r\n  }\r\n\r\n  toggleInstructions = () => {\r\n    this.setState({showInstructions: !this.state.showInstructions});\r\n  }\r\n\r\n  searchStores = async (upc, zip, inStockOnly, minQty) => {\r\n    let [numStores, storeCount, lowPrice, lowZip, numResults] = [200, 4683, 9999, 0, 10];\r\n    if (zip) {\r\n      storeCount = 100;\r\n      numResults = 100;\r\n    }\r\n\r\n    if (this.state.showAll) {\r\n      numResults = 1000;\r\n    }\r\n\r\n    if (upc.length < 12) {\r\n      let resp = await getUPC(upc);\r\n      upc = resp.upc;\r\n      this.setState({variants: resp.variants});\r\n    }\r\n\r\n    if (!upc) {\r\n      console.log('UPC not found');\r\n      this.setState({progress: 100, statusMessage: 'Cannot get item details. Try later or enter UPC'});\r\n      return;\r\n    }\r\n    let progress = 0;\r\n\r\n    for (let i = 0; i< storeCount; i = i + numStores) {\r\n      let url = `https://${randomApiDomain()}/stores-by-code/${upc}`;\r\n      //let url = `http://localhost:3001/stores-by-code/${upc}`;\r\n      axios.get(url, {\r\n        params: {\r\n          start: i,\r\n          stores: numStores,\r\n          zip: zip,\r\n          inStockOnly: inStockOnly,\r\n          minqty: minQty\r\n        }\r\n      })\r\n      .then(resp => {\r\n        if (resp.data.item && resp.data.item.sku && !this.state.product.sku) {\r\n          resp.data.item.variants = this.state.variants;\r\n          resp.data.item.upc = upc;\r\n          this.setState({product: resp.data.item});\r\n        }\r\n\r\n        let storePrices = this.state.storePrices;\r\n        resp.data.storePrices.map(s => {\r\n          storePrices = insertInList(storePrices, s);\r\n          return null;\r\n        });\r\n\r\n        this.setState({storePrices: storePrices.slice(0, numResults)});\r\n        progress = Math.min(100, this.state.progress + numStores * 100 /storeCount);\r\n        this.setState({progress});\r\n        if (progress === 100) {\r\n          this.setState({statusMessage: 'Done!'})\r\n          let product = (({ name, sku, upc, variants, stores}) => ({name, sku, upc, variants, stores}))(this.state.product);\r\n          if (storePrices.length > 0) {\r\n            [lowPrice, lowZip] = [storePrices[0].price, storePrices[0].zip];\r\n          }\r\n          product = {...product, price:lowPrice, zip: '00000'.concat(lowZip).slice(-5)};\r\n          if (product && product.sku) {\r\n            if (this.state.userZip) {\r\n              product.userZip = this.state.userZip;\r\n            }\r\n            if(zip) {\r\n              delete product.zip;\r\n              delete product.price;\r\n            }\r\n            saveSearch(product);\r\n          }\r\n        }\r\n      })\r\n      .catch (e => {\r\n        progress = Math.min(100, this.state.progress + numStores * 100 /storeCount);\r\n        this.setState({progress});\r\n\r\n        console.log('errored', progress, e);\r\n      })\r\n    }\r\n  }\r\n\r\n  getLocalZip = () => {\r\n    navigator.geolocation.getCurrentPosition(pos => {\r\n      let addr = cities.gps_lookup(pos.coords.latitude, pos.coords.longitude);\r\n      this.setState({userZip: addr.zipcode});\r\n    });\r\n  }\r\n\r\n  handleChange(event) {\r\n    let val = (event.target.name === 'inStockOnly') ? event.target.checked: event.target.value;\r\n    this.setState({[event.target.name]: val});\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    this.setState({progress: 1, statusMessage: '', product: {}, variants: ''});\r\n\r\n    if (this.state.upc.length > 3) {\r\n      this.setState({storePrices: []});\r\n      this.searchStores(this.state.upc, this.state.zip, this.state.inStockOnly, this.state.minQty);\r\n    }\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  handleSearch(event) {\r\n    this.searchHistory(this.state.q);\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  handleSearchAgain (upc, event) {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n    this.setState({upc: upc.toString()});\r\n    setTimeout(() => {\r\n      this.handleSubmit();\r\n    }, 1000 / 60);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getLocalZip();\r\n    let query = queryString.parseUrl(window.location.href).query;\r\n    let upc = query.item || '';\r\n    let zip = query.zip || '';\r\n    let showAll = query.showall;\r\n    let minQty = parseInt(query.minqty);\r\n    this.setState({showAll: (showAll === 'yes'), minQty, zip});\r\n\r\n    if (upc) {\r\n        upc = upc.trim().slice(-12);\r\n      this.setState({upc});\r\n      setTimeout(() => {\r\n        this.handleSubmit();\r\n      }, 1000 / 60);\r\n    }\r\n\r\n    this.searchHistory();\r\n  }\r\n  render() {\r\n    const tableDisplay = (this.state.storePrices.length > 0 )?'table-row':'none';\r\n    const productDisplay = (this.state.product && this.state.product.sku)? 'block': 'none';\r\n\r\n    return ( <div className = \"App\" >\r\n      <div className = \"Entry\" >\r\n      <div>\r\n      <div>\r\n      <h2>Walmart nationwide low price search</h2>\r\n      <button onClick={this.toggleInstructions.bind(this)}>Instructions to use it with a barcode app</button>\r\n      <br/>\r\n      Enter SKU or UPC. Enter zip for local search and Pickup Today info. <br/>\r\n      *One search at a time. No multi-tab search please!* <br/>\r\n      Issues / comments? <a target=\"_blank\" rel=\"noopener noreferrer\" className=\"twitter-mention-button\" href=\"https://twitter.com/intent/tweet?screen_name=walseek\">@walseek</a>\r\n      <br/>\r\n      <div style={{textAlign:\"left\", marginLeft: \"40%\", display: this.state.showInstructions?\"block\":\"none\"}}>\r\n        It's handy when you're at a store and want to know the lowest price.\r\n        <ul>\r\n          <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://itunes.apple.com/us/app/barcode/id522354642\">Install this iOS Barcode app</a></li>\r\n          <li>Settings (Bottom right gear icon) -> Custom URL</li>\r\n          <li>Prefix: https://vkana.github.io/walseek?item= </li>\r\n          <li>Name: Walseek (or whatever)</li>\r\n          <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://play.google.com/store/apps/details?id=com.google.zxing.client.android\">Similar app and setup for Android</a></li>\r\n          <li>Goto app and scan a barcode, select Walseek!</li>\r\n        </ul>\r\n\r\n      </div>\r\n      </div><br/>\r\n      <form onSubmit={this.handleSubmit}>\r\n        <label>SKU / UPC: </label>\r\n        <input type = \"text\" name=\"upc\" value={this.state.upc} onChange={this.handleChange}/>\r\n        <label> ZIP: </label>\r\n        <input type = \"text\" name=\"zip\" value={this.state.zip} onChange={this.handleChange}/>\r\n        <label> In Stock Only: </label>\r\n        <input type = \"checkbox\" name=\"inStockOnly\" defaultChecked={this.state.inStockOnly} onChange={this.handleChange}/>\r\n        <input disabled={this.state.progress > 0 && this.state.progress < 100} type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n\r\n      <div id=\"progressbar\">\r\n      <div id=\"progress\" style={{width:`${this.state.progress}%`}}>{this.state.statusMessage}</div>\r\n      </div>\r\n      <br/>\r\n\r\n\r\n          <div style={{display:productDisplay}}>\r\n          <div>Walmart: <a target=\"_blank\" rel=\"noopener noreferrer\" href={this.state.product.url}>{this.state.product.name}</a></div>\r\n          <div>SKU: <a target=\"_blank\" rel=\"noopener noreferrer\" href={this.state.product.bsUrl}>{this.state.product.sku}</a> |\r\n          UPC: <a target=\"_blank\" rel=\"noopener noreferrer\" href={`http://barcode.live/?upc=${this.state.product.upc}`}>{this.state.product.upc}</a></div>\r\n          <div>Online Price: {this.state.product.onlinePrice} | Sold: {this.state.product.offerType}</div>\r\n          <div style={{display:(this.state.product.variants)?'block':'none'}}>Variants: {this.state.product.variants}</div>\r\n          </div>\r\n\r\n<br/>\r\n      <table align=\"center\">\r\n\r\n      <tbody>\r\n\r\n      <tr style={{display: tableDisplay}}>\r\n      <th>Store #</th><th>Address</th><th>ZIP</th><th className=\"right\">Price</th><th>Qty</th><th>Stock</th><th>Aisle</th><th>Pickup Today</th>\r\n      </tr>\r\n      {\r\n        this.state.storePrices.map(storePrice =>\r\n\r\n          <tr key={storePrice.no} className=\"alternate\">\r\n            <td><a target=\"_blank\" rel=\"noopener noreferrer\"\r\n                href={`https://www.walmart.com/store/${storePrice.no}/search?query=${this.state.product.sku}`}>{storePrice.no}</a></td>\r\n            <td>{storePrice.address}</td>\r\n            <td>{storePrice.zip}</td>\r\n            <td className=\"right\">{formatCurrency(storePrice.price)}</td>\r\n            <td className=\"right\">{storePrice.qty}</td>\r\n            <td>{storePrice.stock}</td>\r\n            <td>{storePrice.location}</td>\r\n            <td>{storePrice.pickupToday? 'Yes': 'No'}</td>\r\n          </tr>\r\n        )\r\n      }\r\n      </tbody>\r\n      </table>\r\n      <br/>\r\n      <div>\r\n      <h3>Recent searches</h3>\r\n      <form onSubmit={this.handleSearch}>\r\n        <label>Search: </label>\r\n        <input type = \"text\" name=\"q\" value={this.state.q||''} onChange={this.handleChange}/>\r\n        <input type=\"submit\" value=\"Search\" /> <br/>\r\n        SKU, UPC or Name - item search.  Store# - In stock items in the store from local searches.\r\n      </form>\r\n      <br/>\r\n      <table className=\"alternate left-text\" align=\"center\" width=\"95%\">\r\n        <tbody>\r\n          <tr><th>SKU</th><th>Name</th><th className=\"right-text\">Price</th><th>Address</th></tr>\r\n          {\r\n            this.state.searches.map((s, idx) =>\r\n              <tr key={idx}>\r\n                <td width=\"10%\">\r\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.brickseek.com/walmart-inventory-checker?sku=${s.sku}`}>{s.sku}</a> &nbsp;\r\n                  <a href='#' onClick={(e) => this.handleSearchAgain(s.sku, e)}>&#x21BB;</a>\r\n                </td>\r\n                <td width=\"55%\">\r\n                  {s.name} &nbsp;\r\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.walmart.com/store/${s.storeId}/search?query=${s.sku}`}>ST</a> &nbsp;\r\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.walmart.com/ip/${s.sku}`}>WM</a> &nbsp;\r\n                  <span style={{display:s.upc?'inline-block':'none'}} ><a target=\"_blank\" rel=\"noopener noreferrer\" href={`http://barcode.live?upc=${s.upc}`}>BC</a></span>\r\n                </td>\r\n                <td width=\"10%\" className=\"right-text\">{formatCurrency(s.price)}</td>\r\n                <td width=\"25%\">{s.storeId? '#' + s.storeId + ',' : '[Local Search]'} {s.address} {s.zip}</td>\r\n              </tr>\r\n            )\r\n          }\r\n        </tbody>\r\n      </table>\r\n      <br/>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport twitter from './twitter';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}